<html>
	<head>
		<title>2016 House Cup Admin</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href="admin.css" rel="stylesheet" media="screen">
		<script src="https://code.jquery.com/jquery-2.2.3.min.js" integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo=" crossorigin="anonymous"></script>
		<script src="https://dweet.io/client/dweet.io.min.js"></script>
	</head>

	<body>
		<div class="ui-field-contain">
			<form action="" method="post">
				<label for="tel">Gryffindor</label><br>
				<input type="tel" id="gryffindor" name="gryffindor" value="0"><br>
				<label for="tel">Hufflepuff</label><br>
				<input type="tel" id="hufflepuff" name="hufflepuff" value="0"><br>
				<label for="tel">Ravenclaw</label><br>
				<input type="tel" id="ravenclaw" name="ravenclaw" value="0"><br>
				<label for="tel">Slytherin</label><br>
				<input type="tel" id="slytherin" name="slytherin" value="0"><br><br>
				<input type="submit" value="Submit">
			</form>
		</div>

        <script>
        	function update(d) {
        		$("#gryffindor").val(d.gryffindor);
        		$("#hufflepuff").val(d.hufflepuff);
        		$("#ravenclaw").val(d.ravenclaw);
        		$("#slytherin").val(d.slytherin);
        	}
        	dweetio.get_latest_dweet_for("house-cup-dashboard", function(err, dweet){
        		update(dweet[0].content);
        	});
        	dweetio.listen_for("house-cup-dashboard", function(dweet){
				update(dweet.content);
        	});
        	$("form").on("submit", function() {
	        	dweetio.dweet_for("house-cup-dashboard", 
	        	{	gryffindor: $("#gryffindor").val(),
		        	hufflepuff: $("#hufflepuff").val(),
		        	ravenclaw: $("#ravenclaw").val(),
		        	slytherin: $("#slytherin").val()
	        	}, 
	        	function(err, dweet){});
        	});
        </script>
	</body>
</html>